/*
  backbone-http.js 0.6.0
  Copyright (c) 2013-2014 Vidigami
  License: MIT (http://www.opensource.org/licenses/mit-license.php)
  Source: https://github.com/vidigami/backbone-http
  Dependencies: Backbone.js, Underscore.js, and Moment.js.
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("backbone-orm"),require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["backbone-orm","underscore","backbone"],e):"object"==typeof exports?exports.BackboneHTTP=e(require("backbone-orm"),require("underscore"),require("backbone")):t.BackboneHTTP=e(t.BackboneORM,t._,t.Backbone)}(this,function(t,e,r){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n,o,i,s,a;for(n=r(1),t.exports={sync:r(2),_:n._,Backbone:n.Backbone,modules:{"backbone-orm":n}},a=["url","querystring","lru-cache","underscore","backbone","inflection","stream"],i=0,s=a.length;s>i;i++)o=a[i],t.exports.modules[o]=n.modules[o]},function(e){e.exports=t},function(t,e,r){var n,o,i,s,a,u,h,f,l,c,p;p=r(3),n=r(4),l=n.sync,c=r(1),u=c.Schema,f=c.Utils,s=c.JSONUtils,a=c.CacheSingletons.ModelCache,o=r(5),h=r(6),i=function(){function t(t,e){if(this.model_type=t,null==e&&(e={}),!e.beforeSend||(this.beforeSend=e.beforeSend),this.model_type.model_name=f.findOrGenerateModelName(this.model_type),!(this.url=p.result(new this.model_type,"url")))throw new Error("Missing url for model: "+this.model_type);this.schema=new u(this.model_type,{id:{type:"_raw"}}),this.event_emitter=p.extend({},n.Events)}return t.prototype.initialize=function(){return this.is_initialized?void 0:(this.is_initialized=!0,this.schema.initialize())},t.prototype.resetSchema=function(t,e){return this.http("delete",null,{},e)},t.prototype.cursor=function(t){return null==t&&(t={}),new o(t,{model_type:this.model_type,sync:this})},t.prototype.destroy=function(t,e){var r;return 1===arguments.length&&(r=[{},t],t=r[0],e=r[1]),this.http("delete",null,{query:t},e)},t.prototype.http=function(t,e,r,n){var o,i;return o=e?p.result(e,"url"):this.url,r.query&&p.size(r.query)&&(i=h.parse(o,!0),p.extend(i.query,s.toQuery(r.query)),o=h.format(i)),l(t,e||this.event_emitter,p.extend({url:o,beforeSend:this.beforeSend},r,{success:function(t){return n(null,s.parse(t))},error:function(e){return n(p.extend(new Error("Ajax failed with status "+e.status+" for "+t),{status:e.status}))}}))},t}(),t.exports=function(e,r){var n,o,s;return f.isCollection(new e)?(n=f.configureCollectionModelType(e,t.exports,r),e.prototype.sync=n.prototype.sync):(o=new i(e,r),e.prototype.sync=s=function(e,r,n){var i;if(null==n&&(n={}),o.initialize(),"createSync"===e)return t.exports.apply(null,Array.prototype.slice.call(arguments,1));if("sync"===e)return o;if("schema"===e)return o.schema;if("isRemote"===e)return!0;if(p.contains(["create","update","patch","delete","read"],e)){if(!(i=n.url||p.result(r,"url")))throw new Error("Missing url for model");return"read"===e&&(n=p.extend({$one:!r.models},n)),void o.http(e,r,p.omit(n,"error","success"),function(){return function(t,e){return t?n.error(t):n.success(e)}}(this))}return o[e]?o[e].apply(o,Array.prototype.slice.call(arguments,1)):void 0},f.configureModelType(e),a.configureSync(e,s))}},function(t){t.exports=e},function(t){t.exports=r},function(t,e,r){var n,o,i,s,a,u={}.hasOwnProperty,h=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};a=r(3),n=r(1).Cursor,i=r(1).JSONUtils,s=r(1).Utils,t.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.toJSON=function(t){var e;return this.hasCursorQuery("$zero")?t(null,this.hasCursorQuery("$one")?null:[]):this.sync.http("read",null,{query:e=a.extend(a.clone(this._find),this._cursor)},function(r){return function(n,o){return e.$one&&n&&404===n.status?t(null,null):t(null,r.hasCursorQuery("$count")||r.hasCursorQuery("$exists")?o.result:o)}}(this))},e}(n)},function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&h.isObject(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function i(t){return h.isString(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}{var u={encode:function(t){return t}},h=r(3);r(7)}e.parse=o,e.resolve=s,e.resolveObject=a,e.format=i,e.Url=n;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,c=["<",">",'"',"`"," ","\r","\n","	"],p=["{","}","|","\\","^","`"].concat(c),d=["'"].concat(p),g=["%","/","?",";","#"].concat(d),y=["/","?","#"],m=255,v=/^[a-z0-9A-Z_-]{0,63}$/,b=/^([a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=r(8);n.prototype.parse=function(t,e,r){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.split("#");n[0]=n[0].replace(/\\/g,"/"),t=n.join("#");var o=t;o=o.trim();var i=f.exec(o);if(i){i=i[0];var s=i.toLowerCase();this.protocol=s,o=o.substr(i.length)}if(r||i||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===o.substr(0,2);!a||i&&E[i]||(o=o.substr(2),this.slashes=!0)}if(!E[i]&&(a||i&&!A[i])){for(var l=-1,c=0;c<y.length;c++){var p=o.indexOf(y[c]);-1!==p&&(-1===l||l>p)&&(l=p)}var B,U;U=-1===l?o.lastIndexOf("@"):o.lastIndexOf("@",l),-1!==U&&(B=o.slice(0,U),o=o.slice(U+1),this.auth=decodeURIComponent(B)),l=-1;for(var c=0;c<g.length;c++){var p=o.indexOf(g[c]);-1!==p&&(-1===l||l>p)&&(l=p)}-1===l&&(l=o.length),this.host=o.slice(0,l),o=o.slice(l),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var C=this.hostname.split(/\./),c=0,_=C.length;_>c;c++){var S=C[c];if(S&&!S.match(v)){for(var k="",L=0,j=S.length;j>L;L++)k+=S.charCodeAt(L)>127?"x":S[L];if(!k.match(v)){var O=C.slice(0,c),q=C.slice(c+1),T=S.match(b);T&&(O.push(T[1]),q.unshift(T[2])),q.length&&(o="/"+q.join(".")+o),this.hostname=O.join(".");break}}}if(this.hostname=this.hostname.length>m?"":this.hostname.toLowerCase(),!x){for(var M=this.hostname.split("."),N=[],c=0;c<M.length;++c){var F=M[c];N.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+u.encode(F):F)}this.hostname=N.join(".")}var R=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+R,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!w[s])for(var c=0,_=d.length;_>c;c++){var D=d[c],H=encodeURIComponent(D);H===D&&(H=escape(D)),o=o.split(D).join(H)}var $=o.indexOf("#");-1!==$&&(this.hash=o.substr($),o=o.slice(0,$));var P=o.indexOf("?");if(-1!==P?(this.search=o.substr(P),this.query=o.substr(P+1),e&&(this.query=I.parse(this.query)),o=o.slice(0,P)):e&&(this.search="",this.query={}),o&&(this.pathname=o),A[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var R=this.pathname||"",F=this.search||"";this.path=R+F}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(i=I.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+r+s+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),A[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||E[t.protocol])r.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var i=r.pathname||"",s=r.search||"";r.path=i+s}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=u||a||r.host&&t.pathname,l=f,c=r.pathname&&r.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],p=r.protocol&&!A[r.protocol];if(p&&(r.hostname="",r.port=null,r.host&&(""===c[0]?c[0]=r.host:c.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),f=f&&(""===o[0]||""===c[0])),u)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,c=o;else if(o.length)c||(c=[]),c.pop(),c=c.concat(o),r.search=t.search,r.query=t.query;else if(!h.isNull(t.search)&&!h.isUndefined(t.search)){if(p){r.hostname=r.host=c.shift();var d=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;d&&(r.auth=d.shift(),r.host=r.hostname=d.shift())}return r.search=t.search,r.query=t.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!c.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var g=c.slice(-1)[0],y=(r.host||t.host)&&("."===g||".."===g)||""===g,m=0,v=c.length;v>=0;v--)g=c[v],"."===g?c.splice(v,1):".."===g?(c.splice(v,1),m++):m&&(c.splice(v,1),m--);if(!f&&!l)for(;m--;m)c.unshift("..");!f||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),y&&"/"!==c.join("/").substr(-1)&&c.push("");var b=""===c[0]||c[0]&&"/"===c[0].charAt(0);if(p){r.hostname=r.host=b?"":c.length?c.shift():"";var d=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;d&&(r.auth=d.shift(),r.host=r.hostname=d.shift())}return f=f||r.host&&c.length,f&&!b&&c.unshift(""),c.length?r.pathname=c.join("/"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){e.forEach=function(t,e,r){if(t.forEach)return t.forEach(e,r);for(var n=0;n<t.length;n++)e.call(r,t[n],n,t)},e.substr="b"!=="ab".substr(-1)?function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}:function(t,e,r){return t.substr(e,r)},e.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}},function(t,e,r){(function(t){function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){return t.charCodeAt(0)}var i=e,s=r(3);i.unescapeBuffer=function(e,r){for(var n,i,s,a=new t(e.length),u="CHAR",h=0,f=0;h<=e.length;h++){var l=e.charCodeAt(h);switch(u){case"CHAR":switch(l){case o("%"):n=0,i=0,u="HEX0";break;case o("+"):r&&(l=o(" "));default:a[f++]=l}break;case"HEX0":if(u="HEX1",s=l,o("0")<=l&&l<=o("9"))n=l-o("0");else if(o("a")<=l&&l<=o("f"))n=l-o("a")+10;else{if(!(o("A")<=l&&l<=o("F"))){a[f++]=o("%"),a[f++]=l,u="CHAR";break}n=l-o("A")+10}break;case"HEX1":if(u="CHAR",o("0")<=l&&l<=o("9"))i=l-o("0");else if(o("a")<=l&&l<=o("f"))i=l-o("a")+10;else{if(!(o("A")<=l&&l<=o("F"))){a[f++]=o("%"),a[f++]=s,a[f++]=l;break}i=l-o("A")+10}a[f++]=16*n+i}}return a.slice(0,f-1)},i.unescape=function(t,e){return i.unescapeBuffer(t,e).toString()},i.escape=function(t){return encodeURIComponent(t)};var a=function(t){return s.isString(t)?t:s.isBoolean(t)?t?"true":"false":s.isNumber(t)&&isFinite(t)?t:""};i.stringify=i.encode=function(t,e,r,n){e=e||"&",r=r||"=",s.isNull(t)&&(t=void 0);var o=i.escape;return n&&"function"==typeof n.encodeURIComponent&&(o=n.encodeURIComponent),s.isObject(t)?Object.keys(t).map(function(n){var i=o(a(n))+r;return s.isArray(t[n])?t[n].map(function(t){return i+o(a(t))}).join(e):i+o(a(t[n]))}).join(e):""},i.parse=i.decode=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if(!s.isString(t)||0===t.length)return a;var u=/\+/g;t=t.split(e);var h=1e3;o&&s.isNumber(o.maxKeys)&&(h=o.maxKeys);var f=t.length;h>0&&f>h&&(f=h);var l=decodeURIComponent;o&&"function"==typeof o.decodeURIComponent&&(l=o.decodeURIComponent);for(var c=0;f>c;++c){var p,d,g,y,m=t[c].replace(u,"%20"),v=m.indexOf(r);v>=0?(p=m.substr(0,v),d=m.substr(v+1)):(p=m,d="");try{g=l(p),y=l(d)}catch(b){g=i.unescape(p,!0),y=i.unescape(d,!0)}n(a,g)?s.isArray(a[g])?a[g].push(y):a[g]=[a[g],y]:a[g]=y}return a}}).call(e,r(9).Buffer)},function(t,e,r){(function(t){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);var o,i=typeof e;if("number"===i)o=e>0?e>>>0:0;else if("string"===i)"base64"===r&&(e=C(e)),o=t.byteLength(e,r);else{if("object"!==i||null===e)throw new Error("First argument needs to be a number, array or string.");"Buffer"===e.type&&Array.isArray(e.data)&&(e=e.data),o=+e.length>0?Math.floor(+e.length):0}var s;t._useTypedArrays?s=t._augment(new Uint8Array(o)):(s=this,s.length=o,s._isBuffer=!0);var a;if(t._useTypedArrays&&"number"==typeof e.byteLength)s._set(e);else if(k(e))if(t.isBuffer(e))for(a=0;o>a;a++)s[a]=e.readUInt8(a);else for(a=0;o>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===i)s.write(e,0,r);else if("number"===i&&!t._useTypedArrays&&!n)for(a=0;o>a;a++)s[a]=0;return s}function n(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=e.length;D(i%2===0,"Invalid hex string"),n>i/2&&(n=i/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);D(!isNaN(a),"Invalid hex string"),t[r+s]=a}return s}function o(t,e,r,n){var o=M(j(e),t,r,n);return o}function i(t,e,r,n){var o=M(O(e),t,r,n);return o}function s(t,e,r,n){return i(t,e,r,n)}function a(t,e,r,n){var o=M(T(e),t,r,n);return o}function u(t,e,r,n){var o=M(q(e),t,r,n);return o}function h(t,e,r){return H.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function f(t,e,r){var n="",o="";r=Math.min(t.length,r);for(var i=e;r>i;i++)t[i]<=127?(n+=N(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return n+N(o)}function l(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;r>o;o++)n+=String.fromCharCode(t[o]);return n}function c(t,e,r){return l(t,e,r)}function p(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=e;r>i;i++)o+=L(t[i]);return o}function d(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function g(t,e,r,n){n||(D("boolean"==typeof r,"missing or invalid endian"),D(void 0!==e&&null!==e,"missing offset"),D(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i;return r?(i=t[e],o>e+1&&(i|=t[e+1]<<8)):(i=t[e]<<8,o>e+1&&(i|=t[e+1])),i}}function y(t,e,r,n){n||(D("boolean"==typeof r,"missing or invalid endian"),D(void 0!==e&&null!==e,"missing offset"),D(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i;return r?(o>e+2&&(i=t[e+2]<<16),o>e+1&&(i|=t[e+1]<<8),i|=t[e],o>e+3&&(i+=t[e+3]<<24>>>0)):(o>e+1&&(i=t[e+1]<<16),o>e+2&&(i|=t[e+2]<<8),o>e+3&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}}function m(t,e,r,n){n||(D("boolean"==typeof r,"missing or invalid endian"),D(void 0!==e&&null!==e,"missing offset"),D(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i=g(t,e,r,!0),s=32768&i;return s?-1*(65535-i+1):i}}function v(t,e,r,n){n||(D("boolean"==typeof r,"missing or invalid endian"),D(void 0!==e&&null!==e,"missing offset"),D(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i=y(t,e,r,!0),s=2147483648&i;return s?-1*(4294967295-i+1):i}}function b(t,e,r,n){return n||(D("boolean"==typeof r,"missing or invalid endian"),D(e+3<t.length,"Trying to read beyond buffer length")),$.read(t,e,r,23,4)}function w(t,e,r,n){return n||(D("boolean"==typeof r,"missing or invalid endian"),D(e+7<t.length,"Trying to read beyond buffer length")),$.read(t,e,r,52,8)}function E(t,e,r,n,o){o||(D(void 0!==e&&null!==e,"missing value"),D("boolean"==typeof n,"missing or invalid endian"),D(void 0!==r&&null!==r,"missing offset"),D(r+1<t.length,"trying to write beyond buffer length"),F(e,65535));var i=t.length;if(!(r>=i)){for(var s=0,a=Math.min(i-r,2);a>s;s++)t[r+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s);return r+2}}function A(t,e,r,n,o){o||(D(void 0!==e&&null!==e,"missing value"),D("boolean"==typeof n,"missing or invalid endian"),D(void 0!==r&&null!==r,"missing offset"),D(r+3<t.length,"trying to write beyond buffer length"),F(e,4294967295));var i=t.length;if(!(r>=i)){for(var s=0,a=Math.min(i-r,4);a>s;s++)t[r+s]=e>>>8*(n?s:3-s)&255;return r+4}}function I(t,e,r,n,o){o||(D(void 0!==e&&null!==e,"missing value"),D("boolean"==typeof n,"missing or invalid endian"),D(void 0!==r&&null!==r,"missing offset"),D(r+1<t.length,"Trying to write beyond buffer length"),R(e,32767,-32768));var i=t.length;if(!(r>=i))return e>=0?E(t,e,r,n,o):E(t,65535+e+1,r,n,o),r+2}function B(t,e,r,n,o){o||(D(void 0!==e&&null!==e,"missing value"),D("boolean"==typeof n,"missing or invalid endian"),D(void 0!==r&&null!==r,"missing offset"),D(r+3<t.length,"Trying to write beyond buffer length"),R(e,2147483647,-2147483648));var i=t.length;if(!(r>=i))return e>=0?A(t,e,r,n,o):A(t,4294967295+e+1,r,n,o),r+4}function U(t,e,r,n,o){o||(D(void 0!==e&&null!==e,"missing value"),D("boolean"==typeof n,"missing or invalid endian"),D(void 0!==r&&null!==r,"missing offset"),D(r+3<t.length,"Trying to write beyond buffer length"),z(e,3.4028234663852886e38,-3.4028234663852886e38));var i=t.length;if(!(r>=i))return $.write(t,e,r,n,23,4),r+4}function x(t,e,r,n,o){o||(D(void 0!==e&&null!==e,"missing value"),D("boolean"==typeof n,"missing or invalid endian"),D(void 0!==r&&null!==r,"missing offset"),D(r+7<t.length,"Trying to write beyond buffer length"),z(e,1.7976931348623157e308,-1.7976931348623157e308));var i=t.length;if(!(r>=i))return $.write(t,e,r,n,52,8),r+8}function C(t){for(t=_(t).replace(J,"");t.length%4!==0;)t+="=";return t}function _(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function k(e){return S(e)||t.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function L(t){return 16>t?"0"+t.toString(16):t.toString(16)}function j(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(n);else{var o=r;n>=55296&&57343>=n&&r++;for(var i=encodeURIComponent(t.slice(o,r+1)).substr(1).split("%"),s=0;s<i.length;s++)e.push(parseInt(i[s],16))}}return e}function O(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function q(t){for(var e,r,n,o=[],i=0;i<t.length;i++)e=t.charCodeAt(i),r=e>>8,n=e%256,o.push(n),o.push(r);return o}function T(t){return H.toByteArray(t)}function M(t,e,r,n){for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function N(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function F(t,e){D("number"==typeof t,"cannot write a non-number as a number"),D(t>=0,"specified a negative value for writing an unsigned value"),D(e>=t,"value is larger than maximum value for type"),D(Math.floor(t)===t,"value has a fractional component")}function R(t,e,r){D("number"==typeof t,"cannot write a non-number as a number"),D(e>=t,"value larger than maximum allowed value"),D(t>=r,"value smaller than minimum allowed value"),D(Math.floor(t)===t,"value has a fractional component")}function z(t,e,r){D("number"==typeof t,"cannot write a non-number as a number"),D(e>=t,"value larger than maximum allowed value"),D(t>=r,"value smaller than minimum allowed value")}function D(t,e){if(!t)throw new Error(e||"Failed assertion")}var H=r(11),$=r(10);e.Buffer=t,e.SlowBuffer=t,e.INSPECT_MAX_BYTES=50,t.poolSize=8192,t._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(r){return!1}}(),t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.byteLength=function(t,e){var r;switch(t=t.toString(),e||"utf8"){case"hex":r=t.length/2;break;case"utf8":case"utf-8":r=j(t).length;break;case"ascii":case"binary":case"raw":r=t.length;break;case"base64":r=T(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;default:throw new Error("Unknown encoding")}return r},t.concat=function(e,r){if(D(S(e),"Usage: Buffer.concat(list[, length])"),0===e.length)return new t(0);if(1===e.length)return e[0];var n;if(void 0===r)for(r=0,n=0;n<e.length;n++)r+=e[n].length;var o=new t(r),i=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(o,i),i+=s.length}return o},t.compare=function(e,r){D(t.isBuffer(e)&&t.isBuffer(r),"Arguments must be Buffers");for(var n=e.length,o=r.length,i=0,s=Math.min(n,o);s>i&&e[i]===r[i];i++);return i!==s&&(n=e[i],o=r[i]),o>n?-1:n>o?1:0},t.prototype.write=function(t,e,r,h){if(isFinite(e))isFinite(r)||(h=r,r=void 0);else{var f=h;h=e,e=r,r=f}e=Number(e)||0;var l=this.length-e;r?(r=Number(r),r>l&&(r=l)):r=l,h=String(h||"utf8").toLowerCase();var c;switch(h){case"hex":c=n(this,t,e,r);break;case"utf8":case"utf-8":c=o(this,t,e,r);break;case"ascii":c=i(this,t,e,r);break;case"binary":c=s(this,t,e,r);break;case"base64":c=a(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=u(this,t,e,r);break;default:throw new Error("Unknown encoding")}return c},t.prototype.toString=function(t,e,r){var n=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,r=void 0===r?n.length:Number(r),r===e)return"";var o;switch(t){case"hex":o=p(n,e,r);break;case"utf8":case"utf-8":o=f(n,e,r);break;case"ascii":o=l(n,e,r);break;case"binary":o=c(n,e,r);break;case"base64":o=h(n,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=d(n,e,r);break;default:throw new Error("Unknown encoding")}return o},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.equals=function(e){return D(t.isBuffer(e),"Argument must be a Buffer"),0===t.compare(this,e)},t.prototype.compare=function(e){return D(t.isBuffer(e),"Argument must be a Buffer"),t.compare(this,e)},t.prototype.copy=function(e,r,n,o){var i=this;if(n||(n=0),o||0===o||(o=this.length),r||(r=0),o!==n&&0!==e.length&&0!==i.length){D(o>=n,"sourceEnd < sourceStart"),D(r>=0&&r<e.length,"targetStart out of bounds"),D(n>=0&&n<i.length,"sourceStart out of bounds"),D(o>=0&&o<=i.length,"sourceEnd out of bounds"),o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);var s=o-n;if(100>s||!t._useTypedArrays)for(var a=0;s>a;a++)e[a+r]=this[a+n];else e._set(this.subarray(n,n+s),r)}},t.prototype.slice=function(e,r){var n=this.length;if(e=~~e,r=void 0===r?n:~~r,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>r?(r+=n,0>r&&(r=0)):r>n&&(r=n),e>r&&(r=e),t._useTypedArrays)return t._augment(this.subarray(e,r));for(var o=r-e,i=new t(o,void 0,!0),s=0;o>s;s++)i[s]=this[s+e];return i},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.readUInt8=function(t,e){return e||(D(void 0!==t&&null!==t,"missing offset"),D(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},t.prototype.readUInt16LE=function(t,e){return g(this,t,!0,e)},t.prototype.readUInt16BE=function(t,e){return g(this,t,!1,e)},t.prototype.readUInt32LE=function(t,e){return y(this,t,!0,e)},t.prototype.readUInt32BE=function(t,e){return y(this,t,!1,e)},t.prototype.readInt8=function(t,e){if(e||(D(void 0!==t&&null!==t,"missing offset"),D(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var r=128&this[t];return r?-1*(255-this[t]+1):this[t]}},t.prototype.readInt16LE=function(t,e){return m(this,t,!0,e)},t.prototype.readInt16BE=function(t,e){return m(this,t,!1,e)},t.prototype.readInt32LE=function(t,e){return v(this,t,!0,e)},t.prototype.readInt32BE=function(t,e){return v(this,t,!1,e)},t.prototype.readFloatLE=function(t,e){return b(this,t,!0,e)},t.prototype.readFloatBE=function(t,e){return b(this,t,!1,e)},t.prototype.readDoubleLE=function(t,e){return w(this,t,!0,e)},t.prototype.readDoubleBE=function(t,e){return w(this,t,!1,e)},t.prototype.writeUInt8=function(t,e,r){return r||(D(void 0!==t&&null!==t,"missing value"),D(void 0!==e&&null!==e,"missing offset"),D(e<this.length,"trying to write beyond buffer length"),F(t,255)),e>=this.length?void 0:(this[e]=t,e+1)},t.prototype.writeUInt16LE=function(t,e,r){return E(this,t,e,!0,r)},t.prototype.writeUInt16BE=function(t,e,r){return E(this,t,e,!1,r)},t.prototype.writeUInt32LE=function(t,e,r){return A(this,t,e,!0,r)},t.prototype.writeUInt32BE=function(t,e,r){return A(this,t,e,!1,r)},t.prototype.writeInt8=function(t,e,r){return r||(D(void 0!==t&&null!==t,"missing value"),D(void 0!==e&&null!==e,"missing offset"),D(e<this.length,"Trying to write beyond buffer length"),R(t,127,-128)),e>=this.length?void 0:(t>=0?this.writeUInt8(t,e,r):this.writeUInt8(255+t+1,e,r),e+1)},t.prototype.writeInt16LE=function(t,e,r){return I(this,t,e,!0,r)},t.prototype.writeInt16BE=function(t,e,r){return I(this,t,e,!1,r)},t.prototype.writeInt32LE=function(t,e,r){return B(this,t,e,!0,r)},t.prototype.writeInt32BE=function(t,e,r){return B(this,t,e,!1,r)},t.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return x(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return x(this,t,e,!1,r)},t.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),D(r>=e,"end < start"),r!==e&&0!==this.length){D(e>=0&&e<this.length,"start out of bounds"),D(r>=0&&r<=this.length,"end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var o=j(t.toString()),i=o.length;for(n=e;r>n;n++)this[n]=o[n%i]}return this}},t.prototype.inspect=function(){for(var t=[],r=this.length,n=0;r>n;n++)if(t[n]=L(this[n]),n===e.INSPECT_MAX_BYTES){t[n+1]="...";break}return"<Buffer "+t.join(" ")+">"},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t._useTypedArrays)return new t(this).buffer;for(var e=new Uint8Array(this.length),r=0,n=e.length;n>r;r+=1)e[r]=this[r];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var P=t.prototype;t._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=P.get,t.set=P.set,t.write=P.write,t.toString=P.toString,t.toLocaleString=P.toString,t.toJSON=P.toJSON,t.equals=P.equals,t.compare=P.compare,t.copy=P.copy,t.slice=P.slice,t.readUInt8=P.readUInt8,t.readUInt16LE=P.readUInt16LE,t.readUInt16BE=P.readUInt16BE,t.readUInt32LE=P.readUInt32LE,t.readUInt32BE=P.readUInt32BE,t.readInt8=P.readInt8,t.readInt16LE=P.readInt16LE,t.readInt16BE=P.readInt16BE,t.readInt32LE=P.readInt32LE,t.readInt32BE=P.readInt32BE,t.readFloatLE=P.readFloatLE,t.readFloatBE=P.readFloatBE,t.readDoubleLE=P.readDoubleLE,t.readDoubleBE=P.readDoubleBE,t.writeUInt8=P.writeUInt8,t.writeUInt16LE=P.writeUInt16LE,t.writeUInt16BE=P.writeUInt16BE,t.writeUInt32LE=P.writeUInt32LE,t.writeUInt32BE=P.writeUInt32BE,t.writeInt8=P.writeInt8,t.writeInt16LE=P.writeInt16LE,t.writeInt16BE=P.writeInt16BE,t.writeInt32LE=P.writeInt32LE,t.writeInt32BE=P.writeInt32BE,t.writeFloatLE=P.writeFloatLE,t.writeFloatBE=P.writeFloatBE,t.writeDoubleLE=P.writeDoubleLE,t.writeDoubleBE=P.writeDoubleBE,t.fill=P.fill,t.inspect=P.inspect,t.toArrayBuffer=P.toArrayBuffer,t};var J=/[^+\/0-9A-z]/g}).call(e,r(9).Buffer)},function(t,e){e.read=function(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,h=u>>1,f=-7,l=r?o-1:0,c=r?-1:1,p=t[e+l];for(l+=c,i=p&(1<<-f)-1,p>>=-f,f+=a;f>0;i=256*i+t[e+l],l+=c,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=n;f>0;s=256*s+t[e+l],l+=c,f-=8);if(0===i)i=1-h;else{if(i===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),i-=h}return(p?-1:1)*s*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var s,a,u,h=8*i-o-1,f=(1<<h)-1,l=f>>1,c=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?c/u:c*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,h+=o;h>0;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*g}},function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s?62:e===a?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:h+26>e?e-h+26:void 0}function n(t){function r(t){h[l++]=t}var n,o,s,a,u,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,h=new i(3*t.length/4-u),s=u>0?t.length-4:t.length;var l=0;for(n=0,o=0;s>n;n+=4,o+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===u&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),h}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,s,a=t.length%3,u="";for(o=0,s=t.length-a;s>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(a){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),h="a".charCodeAt(0),f="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}("undefined"==typeof e?this.base64js={}:e)}])});